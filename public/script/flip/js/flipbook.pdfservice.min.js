/* v 3.5.1
author http://codecanyon.net/user/creativeinteractivemedia/portfolio?ref=creativeinteractivemedia
*/

var FLIPBOOK=FLIPBOOK||{};FLIPBOOK.PdfService=function(h,e,u){var g=this;this.pdfDocument=h,this.pdfInfo=h.pdfInfo,this.numPages=this.pdfInfo.numPages,this.webgl="webgl"==u.viewMode,this.options=u,this.main=u.main,this.pages=[],this.thumbs=[],this.canvasBuffer=[],this.viewports=[],this.textContents=[],this.pdfPages=[],this.pdfPagesRendering=[],this.pdfPagesRendered=[],this.bookPagesRendered=[],this.pdfAnnotations=[];for(var t=u.isMobile?40:200,n=0;n<t;n++){var i=document.createElement("canvas");i.width=10,i.height=10,i._name=n,i.available=!0,i.pageIndex=-100,i.pdfPageIndex=-1,this.canvasBuffer.push(i)}function s(r,d){r.htmlContent?d(r):r.getTextContent().then(function(e){r.textContent=e;var t=document.createElement("div");t.classList.add("flipbook-page-htmlContent");if(g.options.textLayer){var n=document.createElement("div");n.className="flipbook-textLayer";var i=1e3/r.getViewport(1).height;n.style.width=String(1e3*r.getViewport(1).width/r.getViewport(1).height)+"px",n.style.height="1000px";var a=new TextLayerBuilder({textLayerDiv:n,pageIndex:r.pageIndex,viewport:r.getViewport(i)});a.setTextContent(e),a.render(TEXT_LAYER_RENDER_DELAY),t.appendChild(n)}var s=new PDFLinkService;s.setViewer(g.main),s.setDocument(h);var o=document.createElement("div");new AnnotationLayerBuilder({pageDiv:o,pdfPage:r,linkService:s}).render(r.getViewport(1e3/g.viewports[0].height),"display"),t.appendChild(o),r.htmlContent=t,d(r)})}this.getCanvas=function(){var e,t;for(e=0;e<this.canvasBuffer.length;e++)if((t=this.canvasBuffer[e]).available){t.available=!1,t.double=!1;break}return this.canvasBuffer.splice(e,1),this.canvasBuffer.push(t),t},this.setRightIndex=function(t){var n=this,i=[],a=this.options.isMobile?4:20;this.canvasBuffer.forEach(function(e){e.available=t-e.pageIndex>3+a||t-e.pageIndex<-2-a,e.available&&-1<e.pageIndex&&(n.pdfPagesRendered[e.pdfPageIndex][e.size]=!1,delete n.pages[e.pdfPageIndex].canvas[e.size],n.pages[e.pdfPageIndex].rendering=!1,n.pages[e.pdfPageIndex].cleanup(),i.push({index:e.pageIndex,size:e.size}),e.double&&i.push({index:e.pageIndex-1,size:e.size}),e.pageIndex=-100,e.getContext("2d").clearRect(0,0,e.width,e.height))}),0<i.length&&this.options.pageUnloaded(i)},window.s=function(){var s=document.createElement("div");document.body.appendChild(s),g.canvasBuffer.forEach(function(e){var t=document.createElement("span");t.style.margin="2px",t.style.background="#ccc",t.style.display="inline-block",s.appendChild(t);var n=e.toDataURL(),i=new Image;i.src=n,i.style.border=e.available?"1px solid #0F0":"1px solid #F00",t.appendChild(i),i.height=100;var a=document.createElement("span");a.style.display="block",t.appendChild(a),a.innerText=e.pageIndex+";"+e.pdfPageIndex+";"+e.size})},this.loadThumbs=function(t,n){var i=this;this.thumbLoading=this.thumbLoading||0,this.thumbLoading>=this.pdfInfo.numPages?n.call(i):this.loadThumb(this.thumbLoading,function(e){i.options.thumbLoaded(e),i.thumbLoading++,i.loadThumbs(t,n)})},this.loadThumb=function(o,r){var d=this;this.getViewport(o,function(){var e=d.pages[o],t=100/e.getViewport(1).height,n=e.getViewport(t),i=document.createElement("canvas");i.index=o;var a=i.getContext("2d");i.height=n.height,i.width=n.width;var s={canvasContext:a,viewport:n};e.cleanupAfterRender=!0,e.render(s).then(function(){e.cleanup(),r&&r.call(d,i)})})},this.getBookPage=function(e,t){},this.init=function(t){this.options.tableOfContent||this.outlineLoaded?g.getViewport(0,function(e){g.r1=e.width/e.height,1==g.pdfInfo.numPages?(g.double=!1,t.call(g)):g.getViewport(1,function(e){g.r2=e.width/e.height,g.double=1.5<g.r2/g.r1,g.getViewport(g.pdfInfo.numPages-1,function(e){g.r3=e.width/e.height,g.backCover=g.r3/g.r1<1.5,t.call(g)})})}):this.pdfDocument.getOutline().then(function(e){g.outline=e,g.outlineLoaded=!0,g.init(t)})},this.startLoadingText=function(){this.loadingText=!0},this.stopLoadingText=function(){this.loadingText=!1},this.getViewport=function(e,t){e>=h.pdfInfo.numPages||(g.pages[e]?(g.viewports[e]=g.pages[e].getViewport(1),t.call(g,g.viewports[e])):h.getPage(e+1).then(function(e){g.pages[e.pageIndex]=e,g.getViewport(e.pageIndex,t)}))},this.getAllViewports=function(e){},this.getText=function(n,i){var a=this;this.getViewport(n,function(e){var t=a.pages[n];s(t,function(){i.call(a,t)})})},this.getTextAllPages=function(e){var t=this;this.loadingTextFromPage=this.loadingTextFromPage||0,this.getText(this.loadingTextFromPage,function(){t.loadingTextFromPage==t.numPages-1?e&&e.call(t):(t.loadingTextFromPage++,t.getTextAllPages(e))})},this.findInPage=function(e,t,n){var i=this;this.findInPageCallbacks=this.findInPageCallbacks||[],this.findInPageCallbacks[t]=n,this.searchingString=e,this.pages[t]&&this.pages[t].textContent?i.findInPageTextContentAvailable(this.pages[t],t):this.getText(t,function(e){i.findInPageTextContentAvailable(e,t)})},this.findInPageTextContentAvailable=function(e,t){for(var n=e.textContent.items,i=0,a=0;a<n.length;a++){var s=n[a].str;s.includes(this.searchingString)&&i++,s.toUpperCase().includes(this.searchingString.toUpperCase())&&i++}var o=this.findInPageCallbacks[t];o&&o.call(this,i,e.htmlContent),this.findInPageCallbacks[t]=null},this.getThumb=function(o,r,d){this.getViewport(o,function(e){var t=g.pages[o];if(t.thumb)d.call(g,t.thumb);else{var n=r/g.viewports[o].height,i=(e=t.getViewport(n),document.createElement("canvas")),a=(t.thumb=i).getContext("2d");i.height=e.height,i.width=e.width;var s={canvasContext:a,viewport:e};t.cleanupAfterRender=!0,t.render(s).then(function(){t.cleanup(),d.call(g,t.thumb)})}})},this.getPage=function(e,t){var n=this;(n.double?Math.round(e/2)+1:e+1)>this.pdfInfo.numPages||h.getPage(e).then(function(e){n.renderPage(e,t)})},this.renderPage=function(r,d,h){var g=this;r.canvas=r.canvas||{},r.canvas[d]?h.call(g,r):(r.rendering&&setTimeout(function(){g.renderPage(r,d,h)},300),r.rendering=!0,s(r,function(){var e=r.getViewport(1),t=e.width<=e.height,n=t||!g.webgl?d/e.height:d/e.width,i=r.getViewport(n),a=g.getCanvas();a.width=i.width,a.height=i.height,a.rendering=!0,g.webgl&&(t?(a.height=d,a.width=i.width>d?i.width:d,a.scaleX=i.width/d,a.scaleY=1):(a.width=d,a.height=i.height>d?i.height:d,a.scaleY=i.height/d,a.scaleX=1));var s=a.getContext("2d");s.fillStyle="#FFFFFF",s.fillStyle="#000000";var o={canvasContext:s,viewport:i};r.scale=n,r.canvas[d]=a,r.canvas[d].ratio=i.width/i.height,r.cleanupAfterRender=!0,r.render(o).promise.then(function(){o=null,h&&h.call(g,r)})}))},this.renderPageFromPdf=function(t,n,i){var a=this;if(t>=this.pdfInfo.numPages&&i.call(a),this.pages[t]){var s=t,e=this.pages[t],o=e.getViewport(1);Math.max(o.width,o.height),o.height;a.pdfPagesRendering[s]&&a.pdfPagesRendering[s][n]?setTimeout(function(){a.renderPageFromPdf(t,n,i)},100):a.pdfPagesRendered[s]&&a.pdfPagesRendered[s][n]?a.onPdfPageRendered(a.pages[s],n,i):(a.pdfPagesRendered[s]=a.pdfPagesRendered[s]||{},a.pdfPagesRendering[s]=a.pdfPagesRendering[s]||{},a.pdfPagesRendering[s][n]=!0,this.renderPage(e,n,function(e){a.pdfPagesRendering[s][n]=!1,a.pdfPagesRendered[s][n]=!0,a.onPdfPageRendered(e,n,i)}))}else this.getViewport(t,function(e){a.renderPageFromPdf(t,n,i)})},this.onBookPageRendered=function(e,t,n,i){this.bookPagesRendered.push({index:n,pdfPageIndex:e.pageIndex,size:i}),u.pages[n].canvas=u.pages[n].canvas||{},u.pages[n].canvas[i]=t,u.pageLoaded(n,i)},this.onPdfPageRendered=function(e,t,n){var i=this;if(e.canvas&&e.canvas[t]){var a=e.canvas[t],s=e.htmlContent,o=e.pageIndex;if(a.pdfPageIndex=o,a.rendering=!1,void 0!==a){if("doubleWithCover"==u.pageMode)if(0==o)p(s,o),a.pageIndex=0,a.size=t,i.onBookPageRendered(e,a,0,t);else if(o==u.pages.length/2)p(s,u.numPages-1),a.pageIndex=u.numPages-1,a.size=t,i.onBookPageRendered(e,a,u.numPages-1,t);else if(s.style.transformOrigin="0 0",i.webgl){a.double=!0,a.scaleX=a.width/2/t,a.scaleY=a.scaleY;var r=s.cloneNode(!0);p(s,2*o-1),p(r,2*o),i.onBookPageRendered(e,a,2*o,t),i.onBookPageRendered(e,a,2*o-1,t),a.pageIndex=2*o,a.size=t}else{var d=i.getCanvas(),h=d.getContext("2d");d.rendering=!0,d.width=a.width/2,d.height=a.height,h.fillStyle="#FFFFFF",h.drawImage(a,a.width/2,0,a.width/2,a.height,0,0,a.width/2,a.height),d.rendering=!1;var g=i.options.rightToLeft?2*o-1:2*o;d.pageIndex=g,d.pdfPageIndex=o,d.size=t;var l=i.getCanvas(),f=l.getContext("2d");l.width=a.width/2,l.height=a.height,l.rendering=!0,f.fillStyle="#FFFFFF",f.drawImage(a,0,0),l.rendering=!1;var c=i.options.rightToLeft?2*o:2*o-1;l.pageIndex=c,l.pdfPageIndex=o,l.size=t;r=s.cloneNode(!0);p(s,2*o-1),p(r,2*o),i.onBookPageRendered(e,d,g,t),i.onBookPageRendered(e,l,c,t),a.available=!0,a.getContext("2d").clearRect(0,0,a.width,a.height),a.pageIndex=-100,a.size=t}else p(s,o),a.pageIndex=o,a.size=t,i.onBookPageRendered(e,a,o,t);n&&n.call(i,{canvas:a,size:t,pdfPageIndex:o})}}function p(e,t){var n=u.pages[t];n.htmlContentInitialized||(n.htmlContent&&jQuery(e).append(jQuery(n.htmlContent)),n.htmlContentInitialized=!0,n.htmlContent=e)}},this.getCanvasByHeight=function(e,t,n){}};var TEXT_LAYER_RENDER_DELAY=200,MAX_TEXT_DIVS_TO_RENDER=1e5,NonWhitespaceRegexp=/\S/;function isAllWhitespace(e){return!NonWhitespaceRegexp.test(e)}var TextLayerBuilder=function(){function e(e){this.textLayerDiv=e.textLayerDiv,this.renderingDone=!1,this.divContentDone=!1,this.pageIdx=e.pageIndex,this.pageNumber=this.pageIdx+1,this.matches=[],this.viewport=e.viewport,this.textDivs=[],this.findController=e.findController||null,this.textLayerRenderTask=null,this._bindMouse()}return e.prototype={_finishRendering:function(){this.renderingDone=!0;var e=document.createElement("div");e.className="endOfContent",this.textLayerDiv.appendChild(e);var t=document.createEvent("CustomEvent");t.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:this.pageNumber}),this.textLayerDiv.dispatchEvent(t)},render:function(e){if(this.divContentDone&&!this.renderingDone){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.textDivs=[];var t=document.createDocumentFragment();this.textLayerRenderTask=PDFJS.renderTextLayer({textContent:this.textContent,container:t,viewport:this.viewport,textDivs:this.textDivs,timeout:e}),this.textLayerRenderTask.promise.then(function(){this.textLayerDiv.appendChild(t),this._finishRendering(),this.updateMatches()}.bind(this),function(e){})}},setTextContent:function(e){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.textContent=e,this.divContentDone=!0},convertMatches:function(e){for(var t=0,n=0,i=this.textContent.items,a=i.length-1,s=null===this.findController?0:this.findController.state.query.length,o=[],r=0,d=e.length;r<d;r++){for(var h=e[r];t!==a&&h>=n+i[t].str.length;)n+=i[t].str.length,t++;t===i.length&&console.error("Could not find a matching mapping");var g={begin:{divIdx:t,offset:h-n}};for(h+=s;t!==a&&h>n+i[t].str.length;)n+=i[t].str.length,t++;g.end={divIdx:t,offset:h-n},o.push(g)}return o},renderMatches:function(e){if(0!==e.length){var d=this.textContent.items,h=this.textDivs,t=null,n=this.pageIdx,i=null!==this.findController&&n===this.findController.selected.pageIdx,a=null===this.findController?-1:this.findController.selected.matchIdx,s={divIdx:-1,offset:void 0},o=a,r=o+1;if(null!==this.findController&&this.findController.state.highlightAll)o=0,r=e.length;else if(!i)return;for(var g=o;g<r;g++){var l=e[g],f=l.begin,c=l.end,p=i&&g===a?" selected":"";if(this.findController&&this.findController.updateMatchPosition(n,g,h,f.divIdx,c.divIdx),t&&f.divIdx===t.divIdx?x(t.divIdx,t.offset,f.offset):(null!==t&&x(t.divIdx,t.offset,s.offset),m(f)),f.divIdx===c.divIdx)x(f.divIdx,f.offset,c.offset,"highlight"+p);else{x(f.divIdx,f.offset,s.offset,"highlight begin"+p);for(var u=f.divIdx+1,v=c.divIdx;u<v;u++)h[u].className="highlight middle"+p;m(c,"highlight end"+p)}t=c}t&&x(t.divIdx,t.offset,s.offset)}function m(e,t){var n=e.divIdx;h[n].textContent="",x(n,0,e.offset,t)}function x(e,t,n,i){var a=h[e],s=d[e].str.substring(t,n),o=document.createTextNode(s);if(i){var r=document.createElement("span");return r.className=i,r.appendChild(o),void a.appendChild(r)}a.appendChild(o)}},updateMatches:function(){if(this.renderingDone){for(var e=this.matches,t=this.textDivs,n=this.textContent.items,i=-1,a=0,s=e.length;a<s;a++){for(var o=e[a],r=Math.max(i,o.begin.divIdx),d=o.end.divIdx;r<=d;r++){var h=t[r];h.textContent=n[r].str,h.className=""}i=o.end.divIdx+1}null!==this.findController&&this.findController.active&&(this.matches=this.convertMatches(null===this.findController?[]:this.findController.pageMatches[this.pageIdx]||[]),this.renderMatches(this.matches))}},_bindMouse:function(){var s=this.textLayerDiv;s.addEventListener("mousedown",function(e){var t=s.querySelector(".endOfContent");if(t){var n=e.target!==s;if(n=n&&"none"!==window.getComputedStyle(t).getPropertyValue("-moz-user-select")){var i=s.getBoundingClientRect(),a=Math.max(0,(e.pageY-i.top)/i.height);t.style.top=(100*a).toFixed(2)+"%"}t.classList.add("active")}}),s.addEventListener("mouseup",function(e){var t=s.querySelector(".endOfContent");t&&(t.style.top="",t.classList.remove("active"))})}},e}(),AnnotationLayerBuilder=function(){function e(e){this.pageDiv=e.pageDiv,this.pdfPage=e.pdfPage,this.linkService=e.linkService,this.div=null}return e.prototype={render:function(t,e){var n=this,i={intent:void 0===e?"display":e};this.pdfPage.getAnnotations(i).then(function(e){if(t=t.clone({dontFlip:!0}),i={viewport:t,div:n.div,annotations:e,page:n.pdfPage,linkService:n.linkService},n.div)PDFJS.AnnotationLayer.update(i);else{if(0===e.length)return;n.div=document.createElement("div"),n.div.className="flipbook-annotationLayer",n.pageDiv.appendChild(n.div),i.div=n.div,PDFJS.AnnotationLayer.render(i),"undefined"!=typeof mozL10n&&mozL10n.translate(n.div)}})},hide:function(){this.div&&this.div.setAttribute("hidden","true")}},e}(),PDFLinkService=function(){function e(){this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}return e.prototype={setDocument:function(e,t){this.baseUrl=t,this.pdfDocument=e,this._pagesRefCache=Object.create(null)},setViewer:function(e){this.pdfViewer=e},setHistory:function(e){this.pdfHistory=e},get pagesCount(){return this.pdfDocument.numPages},get page(){return this.pdfViewer.currentPageNumber},set page(e){this.pdfViewer.currentPageNumber=e},navigateTo:function(t){var e,n="",a=this,s=function(i){var e=i instanceof Object?a._pagesRefCache[i.num+" "+i.gen+" R"]:i+1;e?(e>a.pagesCount&&(e=a.pagesCount),a.pdfViewer.scrollPageIntoView(e,t),a.pdfHistory&&a.pdfHistory.push({dest:t,hash:n,page:e})):a.pdfDocument.getPageIndex(i).then(function(e){var t=e+1,n=i.num+" "+i.gen+" R";a._pagesRefCache[n]=t,s(i)})};"string"==typeof t?(n=t,e=this.pdfDocument.getDestination(t)):e=Promise.resolve(t),e.then(function(e){(t=e)instanceof Array&&s(e[0])})},getDestinationHash:function(e){if("string"==typeof e)return this.getAnchorUrl("#"+escape(e));if(e instanceof Array){var t=e[0],n=t instanceof Object?this._pagesRefCache[t.num+" "+t.gen+" R"]:t+1;if(n){var i=this.getAnchorUrl("#page="+n),a=e[1];if("object"==typeof a&&"name"in a&&"XYZ"===a.name){var s=e[4]||this.pdfViewer.currentScaleValue,o=parseFloat(s);o&&(s=100*o),i+="&zoom="+s,(e[2]||e[3])&&(i+=","+(e[2]||0)+","+(e[3]||0))}return i}}return this.getAnchorUrl("")},getAnchorUrl:function(e){return(this.baseUrl||"")+e},setHash:function(e){if(0<=e.indexOf("=")){var t,n,i=parseQueryString(e);if("nameddest"in i)return this.pdfHistory&&this.pdfHistory.updateNextHashParam(i.nameddest),void this.navigateTo(i.nameddest);if("page"in i&&(t=0|i.page||1),"zoom"in i){var a=i.zoom.split(","),s=a[0],o=parseFloat(s);-1===s.indexOf("Fit")?n=[null,{name:"XYZ"},1<a.length?0|a[1]:null,2<a.length?0|a[2]:null,o?o/100:s]:"Fit"===s||"FitB"===s?n=[null,{name:s}]:"FitH"===s||"FitBH"===s||"FitV"===s||"FitBV"===s?n=[null,{name:s},1<a.length?0|a[1]:null]:"FitR"===s?5!==a.length?console.error("PDFLinkService_setHash: Not enough parameters for 'FitR'."):n=[null,{name:s},0|a[1],0|a[2],0|a[3],0|a[4]]:console.error("PDFLinkService_setHash: '"+s+"' is not a valid zoom value.")}if(n?this.pdfViewer.scrollPageIntoView(t||this.page,n):t&&(this.page=t),"pagemode"in i){var r=document.createEvent("CustomEvent");r.initCustomEvent("pagemode",!0,!0,{mode:i.pagemode}),this.pdfViewer.container.dispatchEvent(r)}}else/^\d+$/.test(e)?this.page=e:(this.pdfHistory&&this.pdfHistory.updateNextHashParam(unescape(e)),this.navigateTo(unescape(e)))},executeNamedAction:function(e){switch(e){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page++;break;case"PrevPage":this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}var t=document.createEvent("CustomEvent");t.initCustomEvent("namedaction",!0,!0,{action:e}),this.pdfViewer.container.dispatchEvent(t)},cachePageRef:function(e,t){var n=t.num+" "+t.gen+" R";this._pagesRefCache[n]=e}},e}();